# 类型定义规范

本文档定义 TypeScript 类型的组织和导入方式。

## 类型文件组织

```tsx
// types/index.ts
export interface Instance {
  id: string;
  name: string;
  type: InstanceType;
  status: InstanceStatus;
  replicas: number;
  resources: InstanceResources;
  created_at: string;
  updated_at: string;
}

export type InstanceType = 'OpenClaw' | 'NanoClaw';

export type InstanceStatus =
  | 'Creating'
  | 'Running'
  | 'Stopped'
  | 'Failed'
  | 'Destroyed';

export interface InstanceResources {
  cpu: string;
  memory: string;
}

export interface Config {
  id: string;
  name: string;
  description: string;
  variables: ConfigVariable[];
  created_at: string;
  updated_at: string;
}

export interface ConfigVariable {
  name: string;
  type: 'string' | 'number' | 'boolean';
  default: string;
  required: boolean;
  description?: string;
}

export interface Tenant {
  id: string;
  name: string;
  quota: TenantQuota;
  created_at: string;
  updated_at: string;
}

export interface TenantQuota {
  instances: number;
  cpu: string;
  memory: string;
  storage: string;
}
```

## 类型导入

```tsx
// 使用 type 关键字导入类型
import type { Instance, Config } from '@/types';

// 不推荐：混合导入
import { Instance, someFunction } from '@/types';
```

## 组件 Props 类型

```tsx
// 方式一：内联定义（简单组件）
function Button({ label, onClick }: { label: string; onClick: () => void }) {
  return <button onClick={onClick}>{label}</button>;
}

// 方式二：接口定义（推荐）
interface ButtonProps {
  label: string;
  variant?: 'primary' | 'secondary';
  disabled?: boolean;
  onClick?: () => void;
}

function Button({ label, variant = 'primary', disabled, onClick }: ButtonProps) {
  // ...
}

// 方式三：继承 HTML 属性
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary';
}
```

## API 响应类型

```tsx
// 通用响应类型
interface ApiResponse<T> {
  data: T;
  message?: string;
}

interface PaginatedResponse<T> {
  data: T[];
  total: number;
  page: number;
  page_size: number;
}

// 使用
const response = await api.get<ApiResponse<Instance>>('/instances/instance-1');
const instance = response.data.data;
```

## 枚举 vs 联合类型

```tsx
// 推荐：使用联合类型
type Status = 'Creating' | 'Running' | 'Stopped' | 'Failed' | 'Destroyed';

// 不推荐：使用枚举（增加运行时代码）
enum Status {
  Creating = 'Creating',
  Running = 'Running',
  Stopped = 'Stopped',
  Failed = 'Failed',
  Destroyed = 'Destroyed',
}
```

## 常量对象类型

```tsx
// 定义常量对象
const INSTANCE_TYPES = {
  OPENCLAW: 'OpenClaw',
  NANOCLAW: 'NanoClaw',
} as const;

// 提取类型
type InstanceType = typeof INSTANCE_TYPES[keyof typeof INSTANCE_TYPES];
// 等价于: 'OpenClaw' | 'NanoClaw'
```

## 工具类型

```tsx
// 部分可选
type PartialInstance = Partial<Instance>;

// 部分必选
type RequiredInstance = Required<Instance>;

// 选择部分字段
type InstanceSummary = Pick<Instance, 'id' | 'name' | 'status'>;

// 排除部分字段
type InstanceInput = Omit<Instance, 'id' | 'created_at' | 'updated_at'>;
```

## 相关文档

- [组件编写规范](./03-组件编写规范.md)
- [API 调用规范](./09-API调用规范.md)